!function(a){"use strict";var t;function s(){a.ajax({url:wps3Admin.ajaxurl,type:"POST",data:{action:"wps3_get_migration_status",nonce:wps3Admin.nonce},success:function(t){var s;t.success&&(s=t.data,a("#wps3-migration-progress").val(s.percent_complete),a("#wps3-migration-status").text("Migrated ".concat(s.migrated_files," of ").concat(s.total_files," files (").concat(s.percent_complete,"%)")),s.complete&&(a("#wps3-migration-status").append(" - Complete!"),a("#wps3-start-migration").prop("disabled",!0),a("#wps3-pause-migration").prop("disabled",!0),a("#wps3-reset-migration").prop("disabled",!1)))}})}a(document).ready((function(){a("#wps3-start-migration").on("click",(function(e){e.preventDefault(),a(this).prop("disabled",!0),a("#wps3-pause-migration").prop("disabled",!1),a.ajax({url:wps3Admin.ajaxurl,type:"POST",data:{action:"wps3_start_migration",nonce:wps3Admin.nonce},success:function(a){a.success?(s(),t=setInterval(s,5e3)):alert(a.data)}})})),a("#wps3-pause-migration").on("click",(function(s){s.preventDefault(),a.ajax({url:wps3Admin.ajaxurl,type:"POST",data:{action:"wps3_pause_migration",nonce:wps3Admin.nonce},success:function(s){s.success?(t&&clearInterval(t),a("#wps3-start-migration").prop("disabled",!1),a("#wps3-pause-migration").prop("disabled",!0)):alert(s.data)}})})),a("#wps3-reset-migration").on("click",(function(t){t.preventDefault(),a.ajax({url:wps3Admin.ajaxurl,type:"POST",data:{action:"wps3_reset_migration",nonce:wps3Admin.nonce},success:function(t){t.success?(a("#wps3-migration-progress").val(0),a("#wps3-migration-status").text("No migration in progress"),a("#wps3-start-migration").prop("disabled",!1),a("#wps3-pause-migration").prop("disabled",!0),a("#wps3-reset-migration").prop("disabled",!0)):alert(t.data)}})})),s()}))}(jQuery);